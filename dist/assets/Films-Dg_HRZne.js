import{r as d,b as w,c as s,a as e,w as y,v as g,d as c,e as x,F as C,f as F,g as h,i as N,h as V,o as n,t as a,j as A,k as B,l as L,m as v,u as f}from"./index-_zfimlV6.js";const R={key:0,class:"form-element"},j={key:1,class:"form-element"},M={class:"full-width"},E={__name:"Films",setup(T){const m=N("membreConnecte"),o=d([]),i=d(!1),u=d("");async function k(){const r=await h.get("http://localhost:8080/api/films");o.value=r.data}async function b(){const r=await h.get("http://localhost:8080/api/films",{params:{recherche:u.value}});o.value=r.data}return w(()=>{k()}),(r,t)=>{const p=V("RouterLink");return n(),s("main",null,[t[8]||(t[8]=e("h2",null,"Les films de l'ENI",-1)),e("form",{class:"search-form",onSubmit:x(b,["prevent"])},[i.value?(n(),s("div",j,[t[4]||(t[4]=c(" A implémenter... ")),e("a",{class:"link",onClick:t[2]||(t[2]=()=>{i.value=!1})},"recherche basique")])):(n(),s("div",R,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),placeholder:"terme de recherche"},null,512),[[g,u.value]]),t[3]||(t[3]=e("button",null,"Rechercher",-1)),e("a",{class:"link",onClick:t[1]||(t[1]=()=>{i.value=!0})},"recherche avancée")]))],32),e("table",M,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"Genre"),e("th",null,"Annee"),e("th",null,"Titre"),e("th",null,"Réalisateur"),e("th",null,"Action")])],-1)),e("tbody",null,[(n(!0),s(C,null,F(o.value,l=>(n(),s("tr",null,[e("td",null,a(l.genre.titre),1),e("td",null,a(l.annee),1),e("td",null,a(l.titre),1),e("td",null,a(l.realisateur.prenom)+" "+a(l.realisateur.nom),1),e("td",null,[A(p,{to:`/films/${l.id}`,class:"link"},{default:v(()=>t[5]||(t[5]=[c("détail")])),_:2},1032,["to"]),f(m)&&f(m).id?(n(),B(p,{key:0,to:`/films/${l.id}/avis`,class:"action-button"},{default:v(()=>t[6]||(t[6]=[c("ajouter avis")])),_:2},1032,["to"])):L("",!0)])]))),256))])])])}}};export{E as default};

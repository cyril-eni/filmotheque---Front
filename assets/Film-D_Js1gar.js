import{n as S,p as M,c as i,o as a,a as u,w as B,t as d,q as D,F as g,f as U,r as c,b as N,d as _,k as v,l as $,u as w,i as V,m as j,j as m,e as A,g as b,s as C,h as R,x as T}from"./index-EAMqb5in.js";import{_ as E,S as L}from"./SubmitButton-DGvOBZKz.js";import{_ as G}from"./TextareaFormElement-DvB0M87o.js";const P={class:"form-element"},q=["multiple","disabled"],H=["value"],k={__name:"SelectFormElement",props:S(["label","type","options","displayElement","multiple","disabled"],{field:{},fieldModifiers:{}}),emits:["update:field"],setup(s){const o=M(s,"field");return(f,n)=>(a(),i("div",P,[u("label",null,d(s.label),1),B(u("select",{"onUpdate:modelValue":n[0]||(n[0]=r=>o.value=r),multiple:s.multiple,disabled:s.disabled},[(a(!0),i(g,null,U(s.options,r=>(a(),i("option",{value:r},d(s.displayElement(r)),9,H))),256))],8,q),[[D,o.value]])]))}},I={class:"form-element"},z={__name:"DisplayUlElement",props:["label","elements","displayElement"],setup(s){return(o,f)=>(a(),i("div",I,[u("label",null,d(s.label),1),u("ul",null,[(a(!0),i(g,null,U(s.elements,n=>(a(),i("li",null,d(s.displayElement(n)),1))),256))])]))}},J={key:0},K={key:1},O={key:3,class:"form-element"},Y={__name:"Film",setup(s){const o=V("membreConnecte"),f=c([]),n=c([]),r=C(),e=c({titre:"",genre:{id:""},realisateur:{id:""},acteurs:[]});async function x(){await b.post("/films",e.value),T.push("/films")}async function F(){let p=await b.get("/genres");f.value=p.data,p=await b.get("/participants"),n.value=p.data;const t=r.params.id,y=await b.get(`/films/${t}`);e.value=y.data}return N(()=>{F()}),(p,t)=>{const y=R("RouterLink");return a(),i("main",null,[e.value.id?(a(),i("h2",J,[_(" Détail du film : "+d(e.value.titre)+" ",1),w(o)&&w(o).id?(a(),v(y,{key:0,to:`/films/${e.value.id}/avis`,class:"action-button"},{default:j(()=>t[7]||(t[7]=[_("ajouter avis")])),_:1},8,["to"])):$("",!0)])):(a(),i("h2",K,"Nouveau Film")),u("form",{method:"post",onSubmit:A(x,["prevent"])},[m(k,{label:"Genre",field:e.value.genre,"onUpdate:field":t[0]||(t[0]=l=>e.value.genre=l),options:f.value,displayElement:l=>l.titre,disabled:e.value.id},null,8,["field","options","displayElement","disabled"]),m(E,{label:"Année",type:"number",field:e.value.annee,"onUpdate:field":t[1]||(t[1]=l=>e.value.annee=l),disabled:e.value.id},null,8,["field","disabled"]),m(E,{label:"Titre",field:e.value.titre,"onUpdate:field":t[2]||(t[2]=l=>e.value.titre=l),disabled:e.value.id},null,8,["field","disabled"]),m(k,{label:"Réalisateur",field:e.value.realisateur,"onUpdate:field":t[3]||(t[3]=l=>e.value.realisateur=l),options:n.value,displayElement:l=>`${l.prenom} ${l.nom}`,disabled:e.value.id},null,8,["field","options","displayElement","disabled"]),m(E,{label:"Durée",type:"number",field:e.value.duree,"onUpdate:field":t[4]||(t[4]=l=>e.value.duree=l),disabled:e.value.id},null,8,["field","disabled"]),e.value.id?(a(),v(z,{key:0,label:"Acteurs",elements:e.value.acteurs,displayElement:l=>`${l.prenom} ${l.nom}`},null,8,["elements","displayElement"])):(a(),v(k,{key:1,multiple:"",label:"Acteurs",field:e.value.acteurs,"onUpdate:field":t[5]||(t[5]=l=>e.value.acteurs=l),options:n.value,displayElement:l=>`${l.prenom} ${l.nom}`},null,8,["field","options","displayElement"])),m(G,{label:"Synopsis",field:e.value.synopsis,"onUpdate:field":t[6]||(t[6]=l=>e.value.synopsis=l),disabled:e.value.id},null,8,["field","disabled"]),e.value.id?$("",!0):(a(),v(L,{key:2})),e.value.id&&e.value.avis.length>0?(a(),i("div",O,[t[8]||(t[8]=u("label",null,"Avis",-1)),u("ul",null,[(a(!0),i(g,null,U(e.value.avis,l=>(a(),i("li",null,d(l.note)+" : "+d(l.commentaire)+" ("+d(l.membre.pseudo)+")",1))),256))])])):$("",!0)],32)])}}};export{Y as default};

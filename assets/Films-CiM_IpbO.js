import{r as d,b as w,c as s,a as e,w as y,v as g,d as m,e as x,F as C,f as F,g as p,i as N,h as V,o as n,t as r,j as A,k as B,l as L,m as f,u as h}from"./index-EAMqb5in.js";const R={key:0,class:"form-element"},j={key:1,class:"form-element"},M={class:"full-width"},E={__name:"Films",setup(T){const c=N("membreConnecte"),o=d([]),u=d(!1),i=d("");async function k(){const a=await p.get("/films");o.value=a.data}async function b(){const a=await p.get("/films",{params:{recherche:i.value}});o.value=a.data}return w(()=>{k()}),(a,t)=>{const v=V("RouterLink");return n(),s("main",null,[t[8]||(t[8]=e("h2",null,"Les films de l'ENI",-1)),e("form",{class:"search-form",onSubmit:x(b,["prevent"])},[u.value?(n(),s("div",j,[t[4]||(t[4]=m(" A implémenter... ")),e("a",{class:"link",onClick:t[2]||(t[2]=()=>{u.value=!1})},"recherche basique")])):(n(),s("div",R,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),placeholder:"terme de recherche"},null,512),[[g,i.value]]),t[3]||(t[3]=e("button",null,"Rechercher",-1)),e("a",{class:"link",onClick:t[1]||(t[1]=()=>{u.value=!0})},"recherche avancée")]))],32),e("table",M,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"Genre"),e("th",null,"Annee"),e("th",null,"Titre"),e("th",null,"Réalisateur"),e("th",null,"Action")])],-1)),e("tbody",null,[(n(!0),s(C,null,F(o.value,l=>(n(),s("tr",null,[e("td",null,r(l.genre.titre),1),e("td",null,r(l.annee),1),e("td",null,r(l.titre),1),e("td",null,r(l.realisateur.prenom)+" "+r(l.realisateur.nom),1),e("td",null,[A(v,{to:`/films/${l.id}`,class:"link"},{default:f(()=>t[5]||(t[5]=[m("détail")])),_:2},1032,["to"]),h(c)&&h(c).id?(n(),B(v,{key:0,to:`/films/${l.id}/avis`,class:"action-button"},{default:f(()=>t[6]||(t[6]=[m("ajouter avis")])),_:2},1032,["to"])):L("",!0)])]))),256))])])])}}};export{E as default};
